import pytest


@pytest.fixture
def initial_position_fen():
    return 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'


def basic_fens():
    return [
        # Initial position
        ('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1', 'e2e4', None),
        ('rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1', 'c7c5', None),
        ('rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq c6 0 2', 'g1f3', None),
        ('rnbqkbnr/pp1ppppp/8/2p5/4P3/5N2/PPPP1PPP/RNBQKB1R b KQkq - 1 2', 'g7g6', None),
        ('rnbqkbnr/pp1ppp1p/6p1/2p5/4P3/5N2/PPPP1PPP/RNBQKB1R w KQkq - 0 3', None, None),
        # Some openings
        ('rnbqk2r/ppp1ppbp/3p1np1/8/2PP4/2N2NP1/PP2PP1P/R1BQKB1R b KQkq - 1 5', None, None),
        ('rnbqkb1r/ppp1pppp/5n2/3p2B1/3P4/2N5/PPP1PPPP/R2QKBNR w KQkq - 4 3', 'g5f6', None),
        ('rnbqkb1r/ppp1pppp/5B2/3p4/3P4/2N5/PPP1PPPP/R2QKBNR b KQkq - 0 3', None, None),
        # Castling
        ('r3k2r/8/8/8/8/8/8/R3K2R w - - 0 1', None, None),
        ('r3k2r/8/8/8/8/8/8/R3K2R w K - 0 1', None, None),
        ('r3k2r/8/8/8/8/8/8/R3K2R w Q - 0 1', None, None),
        ('r3k2r/8/8/8/8/8/8/R3K2R w KQ - 0 1', None, None),

        ('r3k2r/8/8/8/8/8/8/R3K2R w KQkq - 0 1', 'e1g1', None),
        ('r3k2r/8/8/8/8/8/8/R4RK1 b kq - 1 1', 'e8c8', None),
        ('2kr3r/8/8/8/8/8/8/R4RK1 w - - 2 2', None, None),

        ('r3k2r/8/8/8/8/8/8/R3K2R b KQkq - 0 1', 'e8g8', None),
        ('r4rk1/8/8/8/8/8/8/R3K2R w KQ - 1 2', 'e1c1', None),
        ('r4rk1/8/8/8/8/8/8/2KR3R b - - 2 2', None, None),

        ('r3k2r/8/8/8/8/8/8/R3K2R w KQkq - 0 1', 'e1d1', None),
        ('r3k2r/8/8/8/8/8/8/R2K3R b kq - 1 1', 'e8f8', None),
        ('r4k1r/8/8/8/8/8/8/R2K3R w - - 2 2', None, None),

        ('r3k2r/8/8/8/8/8/8/R3K2R w KQkq - 0 1', 'a1a2', None),
        ('r3k2r/8/8/8/8/8/R7/4K2R b Kkq - 1 1', 'h8g8', None),
        ('r3k1r1/8/8/8/8/8/R7/4K2R w Kq - 2 2', 'h1g1', None),
        ('r3k1r1/8/8/8/8/8/R7/4K1R1 b q - 3 2', 'a8d8', None),
        ('3rk1r1/8/8/8/8/8/R7/4K1R1 w - - 4 3', None, None),

        ('r3k2r/8/8/8/8/8/8/R3K2R w KQkq - 0 1', 'h1h8', None),
        ('r3k2R/8/8/8/8/8/8/R3K3 b Qq - 0 1', None, None),

        ('r3k2r/8/8/8/8/8/8/R3K2R w KQkq - 0 1', 'a1a8', None),
        ('R3k2r/8/8/8/8/8/8/4K2R b Kk - 0 1', None, None),

        ('r3k2r/8/8/8/8/8/8/R3K2R b KQkq - 0 1', 'h8h1', None),
        ('r3k3/8/8/8/8/8/8/R3K2r w Qq - 0 2', None, None),

        ('r3k2r/8/8/8/8/8/8/R3K2R b KQkq - 0 1', 'a8a1', None),
        ('4k2r/8/8/8/8/8/8/r3K2R w Kk - 0 2', None, None),

        ('r3k2r/8/8/8/8/8/8/R3K2R b kq - 0 1', None, None),
        ('r3k2r/8/8/8/8/8/8/R3K2R b q - 0 1', None, None),
        ('r3k2r/8/8/8/8/8/8/R3K2R b k - 0 1', None, None),
        ('r3k2r/8/8/8/8/8/8/R3K2R b - - 0 1', None, None),
        # Enpassant
        ('4k3/8/8/3Pp3/8/8/8/4K3 w - e6 0 1', 'd5e6', None),
        ('4k3/8/4P3/8/8/8/8/4K3 b - - 0 1', None, None),
        ('4k3/8/8/8/3pP3/8/8/4K3 b - e3 0 1', 'd4e3', None),
        ('4k3/8/8/8/8/4p3/8/4K3 w - - 0 2', None, None),
        # Promote moves
        ('4k3/1P6/8/8/8/8/8/4K3 w - - 0 1', 'b7b8q', None),
        ('1Q2k3/8/8/8/8/8/8/4K3 b - - 0 1', None, None),
        ('4k3/1P6/8/8/8/8/8/4K3 w - - 0 1', 'b7b8r', None),
        ('1R2k3/8/8/8/8/8/8/4K3 b - - 0 1', None, None),
        ('4k3/1P6/8/8/8/8/8/4K3 w - - 0 1', 'b7b8n', None),
        ('1N2k3/8/8/8/8/8/8/4K3 b - - 0 1', None, None),
        ('4k3/8/8/8/8/8/1p6/4K3 b - - 0 1', 'b2b1q', None),
        ('4k3/8/8/8/8/8/8/1q2K3 w - - 0 2', None, None),
        ('4k3/8/8/8/8/8/1p6/4K3 b - - 0 1', 'b2b1r', None),
        ('4k3/8/8/8/8/8/8/1r2K3 w - - 0 2', None, None),
        ('4k3/8/8/8/8/8/1p6/4K3 b - - 0 1', 'b2b1b', None),
        ('4k3/8/8/8/8/8/8/1b2K3 w - - 0 2', None, None),

        # Basic pseude-legal moves test positions
        # Pawn
        ('8/8/8/8/8/8/4P3/8 w - - 0 1', None, {'e2e3', 'e2e4'}),
        ('8/8/8/8/8/4P3/8/8 w - - 0 1', None, {'e3e4'}),
        ('8/3p4/8/8/8/8/8/8 b - - 0 1', None, {'d7d6', 'd7d5'}),
        ('8/8/3p4/8/8/8/8/8 b - - 0 1', None, {'d6d5'}),
        ('8/8/8/3p4/4P3/8/8/8 w - - 0 1', None, {'e4d5', 'e4e5'}),
        ('8/8/8/3p4/4P3/8/8/8 b - - 0 1', None, {'d5e4', 'd5d4'}),
        ('8/8/8/4p3/4P3/8/8/8 w - - 0 1', None, set()),
        ('8/8/8/4p3/4P3/8/8/8 b - - 0 1', None, set()),
        ('8/8/8/4P3/4P3/8/8/8 w - - 0 1', None, {'e5e6'}),
        ('8/8/8/4p3/4p3/8/8/8 b - - 0 1', None, {'e4e3'}),
        ('8/8/8/8/8/4p3/4P3/8 w - - 0 1', None, set()),
        ('8/8/8/8/4p3/8/4P3/8 w - - 0 1', None, {'e2e3'}),
        ('8/4p3/4P3/8/8/8/8/8 b - - 0 1', None, set()),
        ('8/4p3/8/4P3/8/8/8/8 b - - 0 1', None, {'e7e6'}),
        ('8/8/8/8/8/4P3/4p3/8 w - - 0 1', None, {'e3e4'}),
        ('8/8/8/8/4P3/8/4P3/8 w - - 0 1', None, {'e2e3', 'e4e5'}),
        ('8/4p3/4p3/8/8/8/8/8 b - - 0 1', None, {'e6e5'}),
        ('8/4p3/8/4p3/8/8/8/8 b - - 0 1', None, {'e7e6', 'e5e4'}),
        ('8/8/8/3pp3/3PP3/8/8/8 w - - 0 1', None, {'d4e5', 'e4d5'}),
        ('8/8/8/3pp3/3PP3/8/8/8 b - - 0 1', None, {'d5e4', 'e5d4'}),
        ('8/8/8/3pP3/3Pp3/8/8/8 w - - 0 1', None, {'e5e6'}),
        ('8/8/8/3pP3/3Pp3/8/8/8 b - - 0 1', None, {'e4e3'}),
        ('8/8/8/4Pp2/8/8/8/8 w - f6 0 1', None, {'e5e6', 'e5f6'}),
        ('8/8/6P1/2P1PpP1/8/4P3/8/8 w - f6 0 1', None, {'e5e6', 'e5f6', 'g5f6', 'c5c6', 'e3e4', 'g6g7'}),
        ('8/8/8/8/4Pp2/8/8/8 b - e3 0 1', None, {'f4f3', 'f4e3'}),
        ('8/8/8/4Pp2/8/8/8/8 w - - 0 1', None, {'e5e6'}),
        ('8/8/8/8/4Pp2/8/8/8 b - - 0 1', None, {'f4f3'}),
        ('8/7P/8/8/8/8/8/8 w - - 0 1', None, {'h7h8n', 'h7h8b', 'h7h8r', 'h7h8q'}),
        ('7n/7P/8/8/8/8/8/8 w - - 0 1', None, set()),
        ('8/8/8/8/8/8/p7/8 b - - 0 1', None, {'a2a1n', 'a2a1b', 'a2a1r', 'a2a1q'}),
        ('8/8/8/8/8/8/p7/B7 b - - 0 1', None, set()),
        ('6qN/7P/8/8/8/8/8/8 w - - 0 1', None, {'h7g8n', 'h7g8b', 'h7g8r', 'h7g8q', 'h8f7', 'h8g6'}),
        ('8/8/8/8/8/8/p7/rN6 b - - 0 1', None, {'a2b1n', 'a2b1b', 'a2b1r', 'a2b1q', 'a1b1'}),
        ('6qn/7P/8/8/8/8/8/8 w - - 0 1', None, {'h7g8n', 'h7g8b', 'h7g8r', 'h7g8q'}),
        ('8/8/8/8/8/8/p7/RN6 b - - 0 1', None, {'a2b1n', 'a2b1b', 'a2b1r', 'a2b1q'}),
        ('6NN/7P/8/8/8/8/8/8 w - - 0 1', None, {'g8e7', 'g8h6', 'h8f7', 'h8g6', 'g8f6'}),
        ('8/8/8/8/8/8/p7/rn6 b - - 0 1', None, {'b1d2', 'b1c3', 'b1a3'}),

        # King
        ('8/8/8/8/8/3K4/8/8 w - - 0 1', None, {'d3c2', 'd3c3', 'd3c4', 'd3d2', 'd3d4', 'd3e2', 'd3e3', 'd3e4'}),
        ('8/8/8/8/8/3k4/8/8 b - - 0 1', None, {'d3c2', 'd3c3', 'd3c4', 'd3d2', 'd3d4', 'd3e2', 'd3e3', 'd3e4'}),
        ('8/8/8/8/3P4/3K4/8/8 w - - 0 1', None, {'d3c2', 'd3c3', 'd3c4', 'd3d2', 'd3e2', 'd3e3', 'd3e4', 'd4d5'}),
        ('8/8/8/8/3p4/3k4/8/8 b - - 0 1', None, {'d3c2', 'd3c3', 'd3c4', 'd3d2', 'd3e2', 'd3e3', 'd3e4'}),
        ('8/8/8/8/3p4/3K4/8/8 w - - 0 1', None, {'d3c2', 'd3c3', 'd3c4', 'd3d2', 'd3d4', 'd3e2', 'd3e3', 'd3e4'}),
        ('8/8/8/8/3P4/3k4/8/8 b - - 0 1', None, {'d3c2', 'd3c3', 'd3c4', 'd3d2', 'd3d4', 'd3e2', 'd3e3', 'd3e4'}),

        # Knight
        ('8/8/8/8/8/3N4/8/8 w - - 0 1', None, {'d3c1', 'd3e1', 'd3b2', 'd3f2', 'd3b4', 'd3f4', 'd3c5', 'd3e5'}),
        ('8/8/8/8/8/3n4/8/8 b - - 0 1', None, {'d3c1', 'd3e1', 'd3b2', 'd3f2', 'd3b4', 'd3f4', 'd3c5', 'd3e5'}),
        ('8/8/8/2P5/8/3N4/8/8 w - - 0 1', None, {'d3c1', 'd3e1', 'd3b2', 'd3f2', 'd3b4', 'd3f4', 'd3e5', 'c5c6'}),
        ('8/8/8/2p5/8/3n4/8/8 b - - 0 1', None, {'d3c1', 'd3e1', 'd3b2', 'd3f2', 'd3b4', 'd3f4', 'd3e5', 'c5c4'}),
        ('8/8/8/2p5/8/3N4/8/8 w - - 0 1', None, {'d3c1', 'd3e1', 'd3b2', 'd3f2', 'd3b4', 'd3f4', 'd3c5', 'd3e5'}),
        ('8/8/8/2P5/8/3n4/8/8 b - - 0 1', None, {'d3c1', 'd3e1', 'd3b2', 'd3f2', 'd3b4', 'd3f4', 'd3c5', 'd3e5'}),

        # Rook
        ('8/8/8/8/8/8/1R6/8 w - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4', 'b2b5', 'b2b6', 'b2b7', 'b2b8',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
        }),
        ('8/8/8/8/8/8/1r6/8 b - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4', 'b2b5', 'b2b6', 'b2b7', 'b2b8',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
        }),
        ('8/8/8/8/1p6/8/1R6/8 w - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
        }),
        ('8/8/8/8/1P6/8/1R6/8 w - - 0 1', None, {
            'b2b1', 'b2b3', 'b4b5',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
        }),
        ('8/8/8/8/1P6/8/1r6/8 b - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
        }),
        ('8/8/8/8/1p6/8/1r6/8 b - - 0 1', None, {
            'b2b1', 'b2b3', 'b4b3',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
        }),

        # Bishop
        ('8/8/8/8/8/8/1B6/8 w - - 0 1', None, {
            'b2a1', 'b2c3', 'b2d4', 'b2e5', 'b2f6', 'b2g7', 'b2h8',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/8/8/1b6/8 b - - 0 1', None, {
            'b2a1', 'b2c3', 'b2d4', 'b2e5', 'b2f6', 'b2g7', 'b2h8',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/3p4/8/1B6/8 w - - 0 1', None, {
            'b2a1', 'b2c3', 'b2d4',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/3P4/8/1B6/8 w - - 0 1', None, {
            'b2a1', 'b2c3', 'd4d5',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/3P4/8/1b6/8 b - - 0 1', None, {
            'b2a1', 'b2c3', 'b2d4',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/3p4/8/1b6/8 b - - 0 1', None, {
            'b2a1', 'b2c3', 'd4d3',
            'b2a3', 'b2c1',
        }),

        # Queen
        ('8/8/8/8/8/8/1Q6/8 w - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4', 'b2b5', 'b2b6', 'b2b7', 'b2b8',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
            'b2a1', 'b2c3', 'b2d4', 'b2e5', 'b2f6', 'b2g7', 'b2h8',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/8/8/1q6/8 b - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4', 'b2b5', 'b2b6', 'b2b7', 'b2b8',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
            'b2a1', 'b2c3', 'b2d4', 'b2e5', 'b2f6', 'b2g7', 'b2h8',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/1p6/8/1Q6/8 w - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
            'b2a1', 'b2c3', 'b2d4', 'b2e5', 'b2f6', 'b2g7', 'b2h8',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/1P6/8/1Q6/8 w - - 0 1', None, {
            'b2b1', 'b2b3', 'b4b5',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
            'b2a1', 'b2c3', 'b2d4', 'b2e5', 'b2f6', 'b2g7', 'b2h8',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/1P6/8/1q6/8 b - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
            'b2a1', 'b2c3', 'b2d4', 'b2e5', 'b2f6', 'b2g7', 'b2h8',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/1p6/8/1q6/8 b - - 0 1', None, {
            'b2b1', 'b2b3', 'b4b3',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
            'b2a1', 'b2c3', 'b2d4', 'b2e5', 'b2f6', 'b2g7', 'b2h8',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/3p4/8/1Q6/8 w - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4', 'b2b5', 'b2b6', 'b2b7', 'b2b8',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
            'b2a1', 'b2c3', 'b2d4',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/3P4/8/1Q6/8 w - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4', 'b2b5', 'b2b6', 'b2b7', 'b2b8',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
            'b2a1', 'b2c3', 'd4d5',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/3P4/8/1q6/8 b - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4', 'b2b5', 'b2b6', 'b2b7', 'b2b8',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
            'b2a1', 'b2c3', 'b2d4',
            'b2a3', 'b2c1',
        }),
        ('8/8/8/8/3p4/8/1q6/8 b - - 0 1', None, {
            'b2b1', 'b2b3', 'b2b4', 'b2b5', 'b2b6', 'b2b7', 'b2b8',
            'b2a2', 'b2c2', 'b2d2', 'b2e2', 'b2f2', 'b2g2', 'b2h2',
            'b2a1', 'b2c3', 'd4d3',
            'b2a3', 'b2c1',
        }),

        # King castling
        ('8/8/8/8/8/8/8/4K2R w - - 0 1', None, {
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'h1f1', 'h1g1',
            'h1h2', 'h1h3', 'h1h4', 'h1h5', 'h1h6', 'h1h7', 'h1h8'
        }),
        ('8/8/8/8/8/8/8/4K2R w K - 0 1', None, {
            'e1g1',
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'h1f1', 'h1g1',
            'h1h2', 'h1h3', 'h1h4', 'h1h5', 'h1h6', 'h1h7', 'h1h8'
        }),
        ('8/8/8/8/8/8/8/4K1nR w K - 0 1', None, {
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'h1g1',
            'h1h2', 'h1h3', 'h1h4', 'h1h5', 'h1h6', 'h1h7', 'h1h8'
        }),
        ('8/8/8/8/8/8/8/4Kn1R w K - 0 1', None, {
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'h1f1', 'h1g1',
            'h1h2', 'h1h3', 'h1h4', 'h1h5', 'h1h6', 'h1h7', 'h1h8'
        }),
        ('8/8/8/8/8/8/8/4K1NR w K - 0 1', None, {
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'g1e2', 'g1f3', 'g1h3',
            'h1h2', 'h1h3', 'h1h4', 'h1h5', 'h1h6', 'h1h7', 'h1h8'
        }),


        ('4k2r/8/8/8/8/8/8/8 b - - 0 1', None, {
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'h8f8', 'h8g8',
            'h8h7', 'h8h6', 'h8h5', 'h8h4', 'h8h3', 'h8h2', 'h8h1'
        }),
        ('4k2r/8/8/8/8/8/8/8 b k - 0 1', None, {
            'e8g8',
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'h8f8', 'h8g8',
            'h8h7', 'h8h6', 'h8h5', 'h8h4', 'h8h3', 'h8h2', 'h8h1'
        }),
        ('4k1Nr/8/8/8/8/8/8/8 b k - 0 1', None, {
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'h8g8',
            'h8h7', 'h8h6', 'h8h5', 'h8h4', 'h8h3', 'h8h2', 'h8h1'
        }),
        ('4kN1r/8/8/8/8/8/8/8 b k - 0 1', None, {
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'h8g8', 'h8f8',
            'h8h7', 'h8h6', 'h8h5', 'h8h4', 'h8h3', 'h8h2', 'h8h1'
        }),
        ('4k1nr/8/8/8/8/8/8/8 b k - 0 1', None, {
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'g8e7', 'g8f6', 'g8h6',
            'h8h7', 'h8h6', 'h8h5', 'h8h4', 'h8h3', 'h8h2', 'h8h1'
        }),

        # Queen castling
        ('8/8/8/8/8/8/8/R3K3 w - - 0 1', None, {
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'a1b1', 'a1c1', 'a1d1',
            'a1a2', 'a1a3', 'a1a4', 'a1a5', 'a1a6', 'a1a7', 'a1a8'
        }),
        ('8/8/8/8/8/8/8/R3K3 w Q - 0 1', None, {
            'e1c1',
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'a1b1', 'a1c1', 'a1d1',
            'a1a2', 'a1a3', 'a1a4', 'a1a5', 'a1a6', 'a1a7', 'a1a8'
        }),
        ('8/8/8/8/8/8/8/Rn2K3 w Q - 0 1', None, {
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'a1b1',
            'a1a2', 'a1a3', 'a1a4', 'a1a5', 'a1a6', 'a1a7', 'a1a8'
        }),
        ('8/8/8/8/8/8/8/R1n1K3 w Q - 0 1', None, {
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'a1b1', 'a1c1',
            'a1a2', 'a1a3', 'a1a4', 'a1a5', 'a1a6', 'a1a7', 'a1a8'
        }),
        ('8/8/8/8/8/8/8/R2nK3 w Q - 0 1', None, {
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'a1b1', 'a1c1', 'a1d1',
            'a1a2', 'a1a3', 'a1a4', 'a1a5', 'a1a6', 'a1a7', 'a1a8'
        }),
        ('8/8/8/8/8/8/8/RN2K3 w Q - 0 1', None, {
            'e1d1', 'e1d2', 'e1e2', 'e1f1', 'e1f2',
            'b1a3', 'b1c3', 'b1d2',
            'a1a2', 'a1a3', 'a1a4', 'a1a5', 'a1a6', 'a1a7', 'a1a8'
        }),

        ('r3k3/8/8/8/8/8/8/8 b - - 0 1', None, {
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'a8b8', 'a8c8', 'a8d8',
            'a8a7', 'a8a6', 'a8a5', 'a8a4', 'a8a3', 'a8a2', 'a8a1'
        }),
        ('r3k3/8/8/8/8/8/8/8 b q - 0 1', None, {
            'e8c8',
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'a8b8', 'a8c8', 'a8d8',
            'a8a7', 'a8a6', 'a8a5', 'a8a4', 'a8a3', 'a8a2', 'a8a1'
        }),
        ('rN2k3/8/8/8/8/8/8/8 b q - 0 1', None, {
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'a8b8',
            'a8a7', 'a8a6', 'a8a5', 'a8a4', 'a8a3', 'a8a2', 'a8a1'
        }),
        ('r1N1k3/8/8/8/8/8/8/8 b q - 0 1', None, {
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'a8b8', 'a8c8',
            'a8a7', 'a8a6', 'a8a5', 'a8a4', 'a8a3', 'a8a2', 'a8a1'
        }),
        ('r2Nk3/8/8/8/8/8/8/8 b q - 0 1', None, {
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'a8b8', 'a8c8', 'a8d8',
            'a8a7', 'a8a6', 'a8a5', 'a8a4', 'a8a3', 'a8a2', 'a8a1'
        }),
        ('rn2k3/8/8/8/8/8/8/8 b q - 0 1', None, {
            'e8d8', 'e8d7', 'e8e7', 'e8f8', 'e8f7',
            'b8a6', 'b8c6', 'b8d7',
            'a8a7', 'a8a6', 'a8a5', 'a8a4', 'a8a3', 'a8a2', 'a8a1'
        }),
    ]


def perfts():
    return [
        ('8/8/3k1K2/8/8/8/8/8 w - - 0 1', [5, 36, 257, 1920], 3, None),
        ('8/8/8/8/8/3Kpk2/8/8 b - - 0 1', [6, 36, 291, 2011], 3, None),
        ('8/5K1k/8/5Pp1/8/8/8/8 w - g6 0 1', [7, 27, 163, 670, 4660, 22602, 165254], 4, None),
        ('8/5Kpk/8/5P2/8/8/8/8 b - - 0 1', [4, 26, 109, 700, 3247, 22880, 123247], 4, None),
        ('8/8/8/8/5n2/8/2k5/R3K2R b KQ - 0 1', [12, 229, 2408, 57693], 2, None),
        ('8/8/8/3kb3/2pp1p2/8/2PPP3/3KN3 w - - 0 1', [8, 104, 1061, 14416, 154142], 3, None),
        ('8/P7/8/3q4/8/5k2/8/4K2R b K - 0 1', [30, 386, 8669, 133912], 2, None),
        ('r3k2r/2P3p1/8/5P2/5p2/8/2p3P1/R3K2R w KQkq - 0 1', [31, 812, 22006], 2, None),
        ('r3k2r/2P3p1/8/5P2/5p2/8/2p3P1/R3K2R b KQkq - 0 1', [31, 812, 22006], 2, None),
        ('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1', [20, 400, 8902, 197281], 2, None),
        ('r3k2r/p1ppqpb1/bn2pnp1/3PN3/1p2P3/2N2Q1p/PPPBBPPP/R3K2R w KQkq - 0 1', [48, 2039, 97862], 2,
         {
            'e1g1': 43, 'e1c1': 43, 'e1f1': 43, 'e1d1': 43, 'd5d6': 41, 'd5e6': 46, 'a2a3': 44, 'a2a4': 44,
            'b2b3': 42, 'g2g3': 42, 'g2g4': 42, 'g2h3': 43, 'e5d3': 43, 'e5f7': 44, 'e5c4': 42, 'e5g6': 42,
            'e5g4': 44, 'e5c6': 41, 'e5d7': 45, 'c3b1': 42, 'c3a4': 42, 'c3d1': 42, 'c3b5': 39, 'f3g3': 43,
            'f3h3': 43, 'f3e3': 43, 'f3d3': 42, 'f3g4': 43, 'f3h5': 43, 'f3f4': 43, 'f3f5': 45, 'f3f6': 39,
            'd2c1': 43, 'd2e3': 43, 'd2f4': 43, 'd2g5': 42, 'd2h6': 41, 'e2d1': 44, 'e2f1': 44, 'e2d3': 42,
            'e2c4': 41, 'e2b5': 39, 'e2a6': 36, 'a1b1': 43, 'a1c1': 43, 'a1d1': 43, 'h1g1': 43, 'h1f1': 43
         }),
        ('8/2p5/3p4/KP5r/1R3p1k/8/4P1P1/8 w - - 0 1', [14, 191, 2812, 43238], 2, None),
        ('r2q1rk1/pP1p2pp/Q4n2/bbp1p3/Np6/1B3NBn/pPPP1PPP/R3K2R b KQ - 0 1', [6, 264, 9467], 2, None),
        ('rnbq1k1r/pp1Pbppp/2p5/8/2B5/8/PPP1NnPP/RNBQK2R w KQ - 1 8',  [44, 1486, 62379], 1, None),
        ('r4rk1/1pp1qppp/p1np1n2/2b1p1B1/2B1P1b1/P1NP1N2/1PP1QPPP/R4RK1 w - - 0 10', [46, 2079, 89890], 1, None)
    ]
